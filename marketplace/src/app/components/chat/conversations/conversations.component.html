<div class="conversations-header">
  <h2>Conversations</h2>
</div>

<div #conversations class="conversations-wrapper">
  @for (conversation of (conversations$ | async); track conversation.id) {
    <div
      (click)="goToConversation(conversation)"
      class="conversation">

      <div class="profile-item">
        <div class="image-wrapper">
          <app-avatar [address]="conversation.members[0].identifier" />
        </div>
      </div>

      <div class="item-inner">
        <div class="left">
          <div class="from-address">
            <app-address [address]="conversation.members[0].identifier" />
          </div>
          <div class="message-preview">
            {{ conversation.latestMessageContent }}
          </div>
        </div>
        <div class="right">
          <div class="timestamp">{{ conversation.timestamp | timeago : true }}</div>
          <div class="unread-count">
            @if (conversation.latestMessageContent) {
              &nbsp;
            }
            <!-- {{ conversation.unreadCount }} -->
          </div>
        </div>
      </div>
    </div>
  } @empty {
    <div class="conversation loading">

      <div class="profile-item">
        <div class="image-wrapper">
          <img
            [src]="'/loadingphunk.png'"
            width="50"
            height="50"
          />
        </div>
      </div>

      <div class="item-inner">
        <div class="timestamp">&nbsp;</div>
        <div class="from-address">
          Loading...
        </div>
      </div>
    </div>
  }
</div>
